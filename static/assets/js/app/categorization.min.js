"use strict";var init=function(){var t=location.host+"/api/v1/dms/",e="http://"+t+"categorization/",a=function(t,e){var a=t.find("tbody tr.selected");console.log(e),a.length>0&&a.not(e).removeClass("selected")};$(document).on("click","#all_doc_list tbody tr",function(t){t.stopPropagation();var e=$(this);$("#update_btn, #delete_btn").removeAttr("disabled"),e.addClass("selected"),a($("#all_doc_list"),e)}),$(document).on("click",function(){var t=$("#all_doc_list tbody tr.selected");t.length>0&&(t.removeClass("selected"),$("#update_btn, #delete_btn").attr("disabled","disabled"))});var d=$("#all_doc_list");$.ajax({url:e+"root/",method:"GET",success:function(t){console.log(t),d.find("tbody").html(""),$.each(t,function(t,e){e.root=null==e.parent?"Yes":"No",e.type="cat"==e.type?'<i class="zmdi zmdi-folder"></i> Category':'<i class="zmdi zmdi-file"></i> Document';var a='<tr class="clickie" data-info="{parent:'+e.parent+",self:"+e.id+'}"><td>'+e.name+"</td><td>"+e.type+"</td></tr>";d.find("tbody").append(a)})}}),$(document).on("dblclick","#all_doc_list tbody tr.clickie",function(){var t=$(this),a=new Function("return"+$(t).data("info"))();console.log(a),$.ajax({url:e+"category/"+a.self,method:"GET",success:function(t){if(console.log(t),d.find("tbody").html(""),$("#update_btn, #delete_btn").attr("disabled","disabled"),$("#all_doc_list thead tr .back_button_container").html('<button id="back_button" data-href="'+t.id+'" class="btn bgm-cyan waves-effect"><i class="zmdi zmdi-arrow-back"></i></button>'),"cat"==t.type)if($(d.find("thead tr th")[0]).attr("colspan",2),t.children.length>0)!function(){var e="'"+t.name+"'";$.each(t.children,function(t,a){a.type="cat"==a.type?'<i class="zmdi zmdi-folder"></i> Category':'<i class="zmdi zmdi-file"></i> Document';var n='<tr class="clickie" data-info="{parent:'+e+",self:"+a.id+'}"><td>'+a.name+"</td><td>"+a.type+"</td></tr>";d.find("tbody").append(n)})}();else{var e='<tr><td colspan="4" style="text-align: center;">Sorry, no sub-item available!</td></tr>';d.find("tbody").append(e)}else{$(d.find("thead tr th")[0]).attr("colspan",4);var a="<td>Title</td><td>Data Type</td><td>Default Value</td><td>Required</td>";$(d.find("thead tr")[1]).html(a);var n="<tr><td>Name</td><td>Text</td><td>0</td><td>true</td></tr>";d.find("tbody").append(n)}}})}),$(document).on("click","#back_button",function(){var t=$(this),a=$(t).data("href");console.log(a),$.ajax({url:e+"siblings/"+a,method:"GET",success:function(t){if(console.log("siblings call",t),d.find("tbody").html(""),$("#update_btn, #delete_btn").attr("disabled","disabled"),$(d.find("thead tr th")[0]).attr("colspan",2),null!=t.parent?$("#all_doc_list thead tr .back_button_container").html('<button id="back_button" data-href="'+t.parent+'" class="btn bgm-cyan waves-effect"><i class="zmdi zmdi-arrow-back"></i></button>'):$("#all_doc_list thead tr .back_button_container").html(""),t.siblings.length>0)!function(){var e="<td>Name</td><td>Type</td>";$(d.find("thead tr")[1]).html(e);var a="'"+t.parent+"'";$.each(t.siblings,function(t,e){e.type="cat"==e.type?'<i class="zmdi zmdi-folder"></i> Category':'<i class="zmdi zmdi-file"></i> Document';var n='<tr class="clickie" data-info="{parent:'+a+",self:"+e.id+'}"><td>'+e.name+"</td><td>"+e.type+"</td></tr>";d.find("tbody").append(n)})}();else{var e='<tr><td colspan="4" style="text-align: center;"> Sorry, no sub-item available!</td></tr>';d.find("tbody").append(e)}}})}),$("#add_btn").on("click",function(){$("#add_new_cat_doc").modal().show()}),$("#parent").on("change",function(){}),$("#submit_add_new_cat_doc").on("click",function(){$.ajax({url:e,method:"POST",data:JSON.stringify($("#add_new_cat_doc_form").serializeArray()),success:function(t){console.log(t),$("#add_new_cat_doc").modal().hide()},error:function(t){console.log(t),swal("Sorry!",t,"error")}})})};init();