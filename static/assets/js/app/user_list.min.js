"use strict";$("#users_list").DataTable({processing:!0,serverSide:!0,ajax:$.fn.dataTable.pipeline({url:all_user,pages:1}),scrollY:300,deferRender:!0,scroller:!0,columns:[{title:"Name",data:"first_name"},{title:"Email",data:"email"},{title:"Role",data:"role_name"},{title:"Status",data:"status"}],columnDefs:[{targets:0,width:"35%",render:function(e,a,t){return t.first_name+" "+t.last_name+" ("+t.username+")"}},{targets:1,width:"25%"},{targets:2,width:"20%"},{targets:3,width:"20%",render:function(e){return 0==e?"Inactive":1==e?"Active":2==e?"Vacation":3==e?"Expired":"Status not set yet"}}]});var table=$("#users_list").DataTable();$("#users_list tbody").on("click","tr",function(){var e=table.row(this).data(),a=$("#sa-params"),t=$("#edit_button"),s=$("#summary_button");$(this).hasClass("selected")?($(this).removeClass("selected"),a.removeData("user-id").removeClass("c-black"),t.removeData("user-id").removeClass("c-black"),s.removeData("user-id").removeClass("c-black")):(table.$("tr.selected").removeClass("selected"),$(this).addClass("selected"),a.removeData("user-id").data("user-id",e.id),1==a.data("user-id")?a.removeClass("c-black"):a.addClass("c-black"),a.attr({"data-toggle":"modal","data-target":""}),t.removeData("user-id").data("user-id",e.id).addClass("c-black"),t.attr({"data-toggle":"modal","data-target":""}),s.removeData("user-id").data("user-id",e.id).addClass("c-black"),s.attr({"data-toggle":"modal","data-target":""}))}),$("#button").click(function(){table.row(".selected").remove().draw(!1)}),$(document).on("click","#add_user_button",function(){window.location=add_user}),$(document).on("click","#sa-params",function(){var e=$(this).data("user-id"),a=$("#users_list").find(".selected");if($(this).data("user-id"))if(1===e)notify("Sorry!!! ","System can not delete Admin!!!","","danger");else{var t="/api/v1/user/"+e;e="",swal({title:"Are you sure?",text:"You will not be able to recover this User information!",type:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(function(e){return!!e&&void $.ajax({type:"DELETE",url:t,processData:!1,contentType:!1,success:function(e){a.remove(),notify("Congratulations!!! ","User has been Deleted Successfully","","success")},error:function(e){$.each(JSON.parse(errors),function(e,a){var t=e+": "+a;notify("",t,"","danger")})}})})}else notify("No user selected!!! ","Please select a user first","","danger")}),$(document).on("click","#summary_button",function(){var e=$(this).data("user-id");$("#users_list").find(".selected");if($(this).data("user-id")){var a="/api/v1/user/"+e;$.ajax({type:"GET",url:a,success:function(e){var a,t=moment(e.date_joined).format("YYYY-MM-DD hh:mm"),s=moment(e.date_joined).fromNow(),r=moment(e.expiry_date).format("YYYY-MM-DD hh:mm"),o=moment(e.expiry_date).fromNow();a=0==e.status?"Inactive":1==e.status?"Active":2==e.status?"Vacation":3==e.status?"Expired":"",$("#summary_modal .full_name").text(e.first_name+" "+e.last_name),$("#summary_modal .username").text(e.username),$("#summary_modal .email").text(e.email),$("#summary_modal .address").text(e.address),$("#summary_modal .role_name").text(e.role_name),$("#summary_modal .position").text(e.position),$("#summary_modal .status").text(a),e.avatar?$("#summary_modal .avatar").attr("src",e.avatar):$("#summary_modal .avatar").attr("src","/media/user_img.jpg"),$("#summary_modal .phone_number").text(e.phone_number),$("#summary_modal .date_joined ").text(t+" ( "+s+" )"),$("#summary_modal .expiry_date").text(r+" ( "+o+" )");var m="";$.each(e.group,function(e,a){m=m+" "+a+","}),$("#summary_modal .groups").text(m),$("#summary_modal").modal().show()},error:function(e){console.log(e)}})}else notify("No user selected!!! ","Please select a user first","","danger")}),$("#users_list tbody").on("dblclick","tr",function(){var e=table.row(this).data(),a=e.id,t="/api/v1/user/"+a;$.ajax({type:"GET",url:t,success:function(e){console.log(e);var a,t=moment(e.date_joined).format("YYYY-MM-DD hh:mm"),s=moment(e.date_joined).fromNow(),r=moment(e.expiry_date).format("YYYY-MM-DD hh:mm"),o=moment(e.expiry_date).fromNow();a=0==e.status?"Inactive":1==e.status?"Active":2==e.status?"Vacation":3==e.status?"Expired":"",$("#summary_modal .full_name").text(e.first_name+" "+e.last_name),$("#summary_modal .username").text(e.username),$("#summary_modal .email").text(e.email),$("#summary_modal .address").text(e.address),$("#summary_modal .role_name").text(e.role_name),$("#summary_modal .position").text(e.position),$("#summary_modal .status").text(a),e.avatar?$("#summary_modal .avatar").attr("src",e.avatar):$("#summary_modal .avatar").attr("src","/media/user_img.jpg"),$("#summary_modal .phone_number").text(e.phone_number),$("#summary_modal .date_joined ").text(t+" ( "+s+" )"),$("#summary_modal .expiry_date").text(r+" ( "+o+" )");var m="";$.each(e.group,function(e,a){m=m+" "+a+","}),$("#summary_modal .groups").text(m),$("#summary_modal").modal().show()},error:function(e){console.log(e)}})}),$(document).on("click","#edit_button",function(){if($(this).data("user-id")){var e=$(this).data("user-id"),a="/admin/user/edit_user/"+e;window.location=a}else notify("No user selected!!! ","Please select a user first","","danger")}),$(document).on("click",".paginate_button",function(){$("#users_list").find(".selected").length>0&&($("#sa-params").removeData("user-id").removeClass("c-black"),$("#edit_button").removeData("user-id").removeClass("c-black"),$("#summary_button").removeData("user-id").removeClass("c-black"),$("#users_list tbody tr").removeClass("selected"))});