"use strict";$("#users_list").DataTable({processing:!0,serverSide:!0,ajax:$.fn.dataTable.pipeline({url:all_user,pages:1}),scrollY:300,deferRender:!0,scroller:!0,columns:[{title:"Name",data:null},{title:"Email",data:"email"},{title:"Role",data:"role_name"},{title:"Status",data:"status"}],columnDefs:[{targets:0,width:"25%",render:function(e){return e.first_name+" "+e.last_name}},{targets:1,width:"25%"},{targets:2,width:"25%"},{targets:3,width:"25%",render:function(e){return 0==e?"Inactive":1==e?"Active":2==e?"Vacation":3==e?"Expired":"Status not set yet"}}]});var table=$("#users_list").DataTable();$("#users_list tbody").on("click","tr",function(){var e=table.row(this).data(),t=$("#sa-params"),a=$("#edit_button"),s=$("#summary_button"),r=$("#add_user_button");$(this).hasClass("selected")?($(this).removeClass("selected"),t.removeData("user-id").removeClass("c-black"),a.removeData("user-id").removeClass("c-black"),s.removeData("user-id").removeClass("c-black"),r.addClass("c-black")):(table.$("tr.selected").removeClass("selected"),$(this).addClass("selected"),r.removeClass("c-black"),t.removeData("user-id").data("user-id",e.id),1==t.data("user-id")?t.removeClass("c-black"):t.addClass("c-black"),t.attr({"data-toggle":"modal","data-target":""}),a.removeData("user-id").data("user-id",e.id).addClass("c-black"),a.attr({"data-toggle":"modal","data-target":""}),s.removeData("user-id").data("user-id",e.id).addClass("c-black"),s.attr({"data-toggle":"modal","data-target":""}))}),$("#button").click(function(){table.row(".selected").remove().draw(!1)}),$(document).on("click","#add_user_button",function(){console.log($(this))}),$(document).on("click","#sa-params",function(){var e=$(this).data("user-id"),t=$("#users_list").find(".selected");if($(this).data("user-id"))if(1===e)notify("Sorry!!! ","System can not delete Admin!!!","","danger");else{var a="/api/v1/user/"+e;e="",swal({title:"Are you sure?",text:"You will not be able to recover this User information!",type:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(function(e){return!!e&&void $.ajax({type:"DELETE",url:a,processData:!1,contentType:!1,success:function(e){t.remove();var a="success",s="Congratulations",r="User has been Deleted Successfully ",o=$(this).attr("data-from"),i=$(this).attr("data-align"),d=$(this).attr("data-icon"),l="animated flipInX",n="animated flipOutX";notify(o,i,d,a,s,r,l,n)},error:function(e){var t="danger",a="Sorry",s="Something Went Wrong. User has not been Deleted",r=$(this).attr("data-from"),o=$(this).attr("data-align"),i=$(this).attr("data-icon"),d="animated flipInX",l="animated flipOutX";notify(r,o,i,t,a,s,d,l)}})})}else notify("No user selected!!! ","Please select a user first","","danger")}),$(document).on("click","#summary_button",function(){var e=$(this).data("user-id");$("#users_list").find(".selected");if($(this).data("user-id")){var t="/api/v1/user/"+e;$.ajax({type:"GET",url:t,success:function(e){var t,a,s=moment(e.date_joined).format("YYYY-MM-DD hh:mm"),r=moment(e.date_joined).fromNow(),o=moment(e.expiry_date).format("YYYY-MM-DD hh:mm"),i=moment(e.expiry_date).fromNow();if(t=0==e.status?"Inactive":1==e.status?"Active":2==e.status?"Vacation":3==e.status?"Expired":"",e.replaced_by){var d="/api/v1/user/"+e.replaced_by;$.ajax({type:"GET",url:d,dataType:"json",success:function(e){a=e.first_name+" "+e.last_name,$("#summary_modal .replaced_by").text(a),a=""}})}else $("#summary_modal .replaced_by").text("");$("#summary_modal .full_name").text(e.first_name+" "+e.last_name),$("#summary_modal .username").text(e.username),$("#summary_modal .email").text(e.email),$("#summary_modal .address").text(e.address),$("#summary_modal .role_name").text(e.role_name),$("#summary_modal .position").text(e.position),$("#summary_modal .status").text(t),$("#summary_modal .avatar").attr("src",e.avatar),$("#summary_modal .phone_number").text(e.phone_number),$("#summary_modal .date_joined ").text(s+" ( "+r+" )"),$("#summary_modal .expiry_date").text(o+" ( "+i+" )"),$("#summary_modal").modal().show()},error:function(e){console.log(e)}})}else notify("No user selected!!! ","Please select a user first","","danger")}),$(document).on("click","#edit_button",function(){if($(this).data("user-id")){var e=$(this).data("user-id"),t="/admin/user/edit_user/"+e;window.location=t}else notify("No user selected!!! ","Please select a user first","","danger")});