"use strict";var date=new Date;date.setDate(date.getDate()-7),$("#date_box").datetimepicker({format:"YYYY-MM-DD hh:mm",useCurrent:!1,defaultDate:moment().add(50,"years"),minDate:moment()}),$.ajax({type:"GET",url:all_role,dataType:"json",success:function(e){$.each(e,function(e,a){0==a.active?$("#role_select").append($("<option>",{class:"c-gray",value:a.id,text:a.name})):$("#role_select").append($("<option>",{value:a.id,text:a.name}))}),$("#role_select").selectpicker("refresh")}}),$("#replaced_by_font").one("click",function(){$.ajax({type:"GET",url:all_user,dataType:"json",data:param,success:function(e){$.each(e.data,function(a,t){e.recordsTotal<=param.start+e.data.length&&$("#next").addClass("hide");var r=t.first_name+" "+t.last_name+" ("+t.username+")",s=$("#replaced_by_font").val();r==s?$("#user_list").append('<div class="radio m-b-15"><label><input type="radio" name="radio_selected_user" id="replaced_user" checked="checked" value='+t.id+'><i class="input-helper"></i><div class="name">'+t.first_name+" "+t.last_name+" ("+t.username+")</div></label></div>"):$("#user_list").append('<div class="radio m-b-15"><label><input type="radio" name="radio_selected_user" id="replaced_user" value='+t.id+'><i class="input-helper"></i><div class="name">'+t.first_name+" "+t.last_name+" ("+t.username+")</div></label></div>")}),$("input:radio[name=radio_selected_user]").change(function(){if($(this).is(":checked")){var e=$(this).siblings(".name").text(),a=$(this).val();$("#replaced_by").val(a),$("#replaced_by_font").val(e)}})}})}),$("#next").on("click",function(){$("#previous").removeClass("hide");var e=parseInt(param.start)+parseInt(param.length);param={start:e,length:10,draw:1},$.ajax({type:"GET",url:all_user,dataType:"json",data:param,success:function(e){e.recordsTotal==param.start+e.data.length&&$("#next").addClass("hide"),$("#user_list").children().remove(),$.each(e.data,function(e,a){var t=a.first_name+" "+a.last_name+" ("+a.username+")",r=$("#replaced_by_font").val();t==r?$("#user_list").append('<div class="radio m-b-15"><label><input type="radio" name="radio_selected_user" id="replaced_user" checked="checked" value='+a.id+'><i class="input-helper"></i><div class="name">'+a.first_name+" "+a.last_name+" ("+a.username+")</div></label></div>"):$("#user_list").append('<div class="radio m-b-15"><label><input type="radio" name="radio_selected_user" id="replaced_user" value='+a.id+'><i class="input-helper"></i><div class="name">'+a.first_name+" "+a.last_name+" ("+a.username+")</div></label></div>")}),$("input:radio[name=radio_selected_user]").change(function(){if($(this).is(":checked")){var e=$(this).siblings(".name").text(),a=$(this).val();$("#replaced_by").val(a),$("#replaced_by_font").val(e)}})}})}),$("#previous").on("click",function(){$("#next").removeClass("hide"),param.start-param.length==0&&$("#previous").addClass("hide");var e=parseInt(param.start)-parseInt(param.length);param={start:e,length:10,draw:1},$.ajax({type:"GET",url:all_user,dataType:"json",data:param,success:function(e){param.start==e.recordsTotal-param.length&&($("#previous").addClass("hide"),$("#next").removeClass("hide")),$("#user_list").children().remove(),$.each(e.data,function(e,a){var t=a.first_name+" "+a.last_name+" ("+a.username+")",r=$("#replaced_by_font").val();t==r?$("#user_list").append('<div class="radio m-b-15"><label><input type="radio" name="radio_selected_user" id="replaced_user" checked="checked" value='+a.id+'><i class="input-helper"></i><div class="name">'+a.first_name+" "+a.last_name+" ("+a.username+")</div></label></div>"):$("#user_list").append('<div class="radio m-b-15"><label><input type="radio" name="radio_selected_user" id="replaced_user" value='+a.id+'><i class="input-helper"></i><div class="name">'+a.first_name+" "+a.last_name+" ("+a.username+")</div></label></div>")}),$("input:radio[name=radio_selected_user]").change(function(){if($(this).is(":checked")){var e=$(this).siblings(".name").text(),a=$(this).val();$("#replaced_by").val(a),$("#replaced_by_font").val(e)}})}})});var radioState;$(document).on("click","input[name=radio_selected_user]",function(){radioState===this?(this.checked=!1,$("#replaced_by").val(""),$("#replaced_by_font").val(""),radioState=null):radioState=this});var app=app||{};!function(e,a){a.utils={},a.utils.formDataSuppoerted=function(){return!!("FormData"in window)}()}(jQuery,app),function(e,a){window.Parsley.addValidator("filemaxmegabytes",{requirementType:"string",validateString:function(e,t,r){if(!a.utils.formDataSuppoerted)return!0;var s=r.$element[0].files,i=1048576*t;return 0==s.length||1===s.length&&s[0].size<=i},messages:{en:"File is to big"}}).addValidator("filemimetypes",{requirementType:"string",validateString:function(e,t,r){if(!a.utils.formDataSuppoerted)return!0;var s=r.$element[0].files;if(0==s.length)return!0;var i=t.replace(/\s/g,"").split(",");return i.indexOf(s[0].type)!==-1},messages:{en:"File mime type not allowed"}})}(jQuery,app),function(e,a){e("#create_user").parsley()}(jQuery,app);var frm=$("#create_user");frm.submit(function(e){e.preventDefault();var a=new FormData($(this)[0]);return console.log(a),$.ajax({type:"post",url:add_user_url,data:a,processData:!1,contentType:!1,success:function(e){notify("Congratulations!!! ","User Added Successfully "," ","success")},error:function(e){var a=e.responseText;$.each(JSON.parse(a),function(e,a){var t=e+": "+a;notify("",t,"","danger")})}}),!1}),$("#go_back").on("click",function(e){e.preventDefault(),window.location=user_management_page}),$("#password").on("keydown",function(){$("#cfrm_password").val("").parsley().reset()});